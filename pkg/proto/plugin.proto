syntax = "proto3";

package proto;

option go_package = "github.com/andersnormal/picasso/pkg/proto";

// Provider 
service Plugin {
    rpc Execute(Execute.Request) returns (Execute.Response) {}
    rpc Stop(Stop.Request) returns (Stop.Response) {}
}

// Start ...
message Execute {
    enum Status {
        UNKNOWN = 0;
        SUCCESS = 1;
        FAILURE = 2;
    }

    // Request ...
    message Request {
        string version              = 1;
        map<string, string> vars    = 2;
        repeated string args        = 3;
    }
    // Response ...
    message Response {
        Status status = 1;
        repeated Diagnostic diagnostic = 10;
    }
}

// Stop ...
message Stop {
    // Request ...
    message Request {

    }
    // Response ...
    message Response {
        string Error = 1;
    }
}

// Diagnostic ...
message Diagnostic {
    enum Severity {
        INVALID     = 0;
        ERROR       = 1;
        WARNING     = 2;
    }

    Severity severity                = 1;
    string summary                   = 2;
    string detail                    = 3;
    repeated string FilePaths        = 4;
}

// PluginRequest ...
message PluginRequest {
    // FilePaths ...
    repeated string FilePaths        = 1;
    // Parameters ...
    map<string, string> Parameters   = 2;
    // Spec ...
    string Spec                      = 3;
    // Version ...
    string Version                   = 4;
}


// PluginResponse ...
message PluginResponse {
    // FilePaths ...
    repeated string FilePaths        = 1;
    // Error ...
    string Error                     = 2;
}

// PluginCommandRequest ...
message PluginCommandRequest {
    // Command ...
    string Command                  = 1;
    // Parameters ...
    map<string, string> Parameters  = 2;
    // Spec ...
    string Spec                     = 3;
    // Version ...
    string Version                  = 4;
}

// PluginCommandResponse ...
message PluginCommandResponse {
    // Error ...
    string Error                    = 1;
}

// PluginUsageRequest ...
message PluginUsageRequest {
    // Spec ...
    string Spec                     = 1;
    // Version ...
    string Version                  = 2;
}

// PluginUsageResponse ...
message PluginUsageResponse {
    // Error ...
    string Error                    = 1;
    // Parameters ...
    map<string, string> Parameters  = 2;
}